{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "build-wasm",
      "command": "dotnet",
      "type": "shell",
      "args": [
        "build",
        "${workspaceFolder}/BKBToolClient.csproj"
      ],
      "group": "build",
      "presentation": {
        "reveal": "silent"
      },
      "problemMatcher": "$msCompile"
    },
    {
      "label": "build-console",
      "command": "dotnet",
      "type": "shell",
      "args": [
        "build",
        "${workspaceFolder}/ConsoleApp/BKBToolConsole.csproj"
      ],
      "group": "build",
      "presentation": {
        "reveal": "silent"
      },
      "problemMatcher": "$msCompile"
    },
    {
      "label": "build",
      "dependsOn": [
        "build-wasm",
        "build-console"
      ],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "reveal": "silent"
      },
      "problemMatcher": []
    },
    {
      "label": "publish-release",
      "command": "dotnet",
      "type": "shell",
      "args": [
        "publish",
        "${workspaceFolder}/BKBToolClient.csproj",
        "-c",
        "Release",
        "-o",
        "${workspaceFolder}/dist"
      ],
      "group": "build",
      "presentation": {
        "reveal": "always"
      },
      "problemMatcher": "$msCompile"
    },
    {
      "label": "serve-dist",
      "command": "python3",
      "type": "shell",
      "args": [
        "-m",
        "http.server",
        "5000",
        "--directory",
        "${workspaceFolder}/dist/wwwroot"
      ],
      "isBackground": true,
      "runOptions": {
        "instanceLimit": 1
      },
      "presentation": {
        "reveal": "always"
      },
      "problemMatcher": {
        "pattern": {
          "regexp": ".*"
        },
        "background": {
          "activeOnStart": true,
          "beginsPattern": ".*Serving HTTP on.*|.*Starting server.*",
          "endsPattern": ".*"
        }
      }
    },
    {
      "label": "run-console-app",
      "command": "dotnet",
      "type": "shell",
      "args": [
        "run",
        "--project",
        "${workspaceFolder}/ConsoleApp/BKBToolConsole.csproj"
      ],
      "runOptions": {
        "instanceLimit": 1
      },
      "presentation": {
        "reveal": "always"
      },
      "problemMatcher": "$msCompile"
    },
    {
      "label": "run-dev-server",
      "command": "dotnet",
      "type": "shell",
      "args": [
        "watch",
        "--",
        "dotnet",
        "run",
        "--configuration",
        "Release"
      ],
      "options": {
        "env": {
          "ASPNETCORE_URLS": "http://127.0.0.1:5000"
        }
      },
      "isBackground": true,
      "runOptions": {
        "instanceLimit": 1
      },
      "problemMatcher": {
        // Minimal pattern (not used for diagnostics, nur f√ºr Background-State)
        "pattern": {
          "regexp": ".*"
        },
        "background": {
          "activeOnStart": true,
          // dotnet watch signalisiert Start z.B. mit "watch : Started"
          "beginsPattern": ".*watch.*Started.*|.*Hot reload enabled.*",
          // Alternative Ready-Marker der WasmAppHost-Ausgabe
          "endsPattern": ".*Now listening on:.*|.*Application started\\.|.*App url:.*|.*Debug at url:.*"
        }
      },
      "presentation": {
        "reveal": "silent"
      }
    }
  ]
}